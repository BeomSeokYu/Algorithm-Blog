<!DOCTYPE html>
<html th:fragment="layout (mainSection, scriptSection)"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="알고리즘 이론과 문제 풀이를 간결하게 정리한 개인 노트입니다.">
  <meta name="theme-color" content="#f6f3ee">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="알고리즘 노트">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <th:block>
    <link rel="canonical" th:if="${baseUrl != null and baseUrl != ''}" th:href="${baseUrl + requestPath}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="알고리즘 노트">
    <meta property="og:title" content="Yu's Algorithm Note">
    <meta property="og:description" content="알고리즘 이론과 문제 풀이를 간결하게 정리한 개인 노트입니다.">
    <meta property="og:url" th:if="${baseUrl != null and baseUrl != ''}" th:content="${baseUrl + requestPath}">
    <meta property="og:image" th:if="${baseUrl != null and baseUrl != ''}" th:content="${baseUrl + '/assets/img/main.png'}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Yu's Algorithm Note">
    <meta name="twitter:description" content="알고리즘 이론과 문제 풀이를 간결하게 정리한 개인 노트입니다.">
    <meta name="twitter:image" th:if="${baseUrl != null and baseUrl != ''}" th:content="${baseUrl + '/assets/img/main.png'}">
  </th:block>

  <title>Yu's Algolithm Note</title>

  <th:block th:replace="layout/favicon :: favicon"></th:block>

  <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/css/sidebar.css">
  <link rel="stylesheet" href="/assets/css/ckcontent.css">
  <link rel="stylesheet" href="/assets/css/common.css">
</head>

<body class="app-body">
<main class="main" id="top">
  <div th:replace="layout/navbar :: navbar"></div>

  <section class="content-section">
    <div class="container layout-grid">
      <aside class="side-panel">
        <div class="side-card">
          <div class="side-title">카테고리</div>
          <p class="side-hint">이론 정리와 문제 풀이를 구분해서 볼 수 있어요.</p>
          <nav class="side-nav">
            <a th:href="@{/articles(type='이론정리', q=${query}, categories=${selectedCategoryIdsCsv}, sort=${sort}, size=${pageSize}, preview=${preview})}"
               th:classappend="${type == '이론정리'} ? ' is-active' : ''"
               class="side-link">이론 정리</a>
            <a th:href="@{/articles(type='문제풀이', q=${query}, categories=${selectedCategoryIdsCsv}, sort=${sort}, size=${pageSize}, preview=${preview})}"
               th:classappend="${type == '문제풀이'} ? ' is-active' : ''"
               class="side-link">문제 풀이</a>
          </nav>

          <th:block th:if="${showFilters}">
            <hr class="side-divider">
            <div class="side-title">필터</div>
            <p class="side-hint">알고리즘 분류를 태그로 선택하세요.</p>
            <form class="side-filter" method="get" action="/articles">
              <input type="hidden" name="type" th:value="${type}">
              <input type="hidden" name="q" th:value="${query}">
              <input type="hidden" name="sort" th:value="${sort}">
              <input type="hidden" name="size" th:value="${pageSize}">
              <input type="hidden" name="preview" th:value="${preview}">
              <div class="side-filter__field">
                <label class="side-filter__label">알고리즘 분류</label>
                <div class="tag-input-wrapper"
                     data-tag-input
                     data-hidden="filter-category-ids"
                     th:attr="data-selected=${selectedCategoryIdsCsv}">
                  <div class="tag-input">
                    <div class="tag-input__items"></div>
                    <input type="text" class="tag-input__control" placeholder="분류 검색">
                  </div>
                  <div class="tag-suggestions"></div>
                </div>
                <input type="hidden" id="filter-category-ids" name="categories" th:value="${selectedCategoryIdsCsv}">
              </div>
              <div class="side-filter__actions">
                <button type="submit" class="btn btn-outline btn-sm">필터</button>
                <a class="btn btn-ghost btn-sm" th:href="@{/articles(type=${type})}">초기화</a>
              </div>
            </form>
          </th:block>
        </div>
      </aside>
      <div class="content-panel" th:classappend="${contentPanelPadding == false} ? '' : ' px-3'">
        <div th:replace="${mainSection}"></div>
      </div>
    </div>
  </section>

  <div th:replace="layout/footer :: footer"></div>
</main>
</body>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/token.js"></script>
<th:block th:replace="${scriptSection}"></th:block>
</html>
